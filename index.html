<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ФЛОУИ VPN - PUBG Mobile</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
</head>

<body>
    <!-- Контент -->
    <div class="app-container">
        <!-- Основной контент -->
        <main class="main-content">
            <!-- Виджет пинга -->
            <section class="ping-widget">
                <div class="ping-header">
                    <h2 class="section-title"><i class="fas fa-signal"></i> Проверка пинга</h2>
                    <div class="ping-badge">LIVE</div>
                </div>
                <div class="ping-display">
                    <div class="ping-circle">
                        <div class="ping-value" id="pingValue">--</div>
                        <div class="ping-label">мс</div>
                        <div class="ping-ring"></div>
                    </div>
                    <p class="ping-description">Текущая задержка в PUBG Mobile</p>
                </div>
                <button class="simple-btn btn-primary btn-ping" id="checkPingBtn">
                    <i class="fas fa-sync-alt"></i> Проверить сейчас
                </button>
                <div class="ping-status">
                    <div class="status-indicators">
                        <div class="status-indicator excellent active"></div>
                        <div class="status-indicator good"></div>
                        <div class="status-indicator normal"></div>
                    </div>
                    <span class="status-text">Идеальное соединение</span>
                </div>
            </section>

            <!-- Тарифы -->
            <section class="tariffs-section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-crown"></i> Выберите VPN</h2>
                    <p class="section-subtitle">Оптимизировано для PUBG Mobile</p>
                </div>

                <div class="tariffs-container">
                    <!-- Лайт VPN -->
                    <div class="tariff-card">
                        <div class="tariff-header">
                            <div class="tariff-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="tariff-info">
                                <h3 class="tariff-title">Лайт VPN</h3>
                                <div class="tariff-price">
                                    <span class="price">299</span>
                                    <span class="currency">₽/мес</span>
                                </div>
                            </div>
                        </div>
                        <div class="tariff-features">
                            <div class="feature">
                                <i class="fas fa-check"></i>
                                <span>Пинг: -30-50мс</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-check"></i>
                                <span>Лучшая регистрация урона</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-check"></i>
                                <span>Серверы в РФ и Европе</span>
                            </div>
                        </div>
                        <button class="simple-btn btn-primary buy-btn" data-plan="light" data-price="299" data-name="Лайт VPN">
                            <i class="fas fa-shopping-cart"></i>
                            <span>Выбрать тариф</span>
                        </button>
                    </div>

                    <!-- Про VPN -->
                    <div class="tariff-card">
                        <div class="tariff-header">
                            <div class="tariff-icon">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <div class="tariff-info">
                                <h3 class="tariff-title">Про VPN</h3>
                                <div class="tariff-price">
                                    <span class="price">599</span>
                                    <span class="currency">₽/мес</span>
                                </div>
                            </div>
                        </div>
                        <div class="tariff-features">
                            <div class="feature">
                                <i class="fas fa-check"></i>
                                <span>Высокая скорость</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-check"></i>
                                <span>Больше хедшотов</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-check"></i>
                                <span>Приоритет на серверах</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-check"></i>
                                <span>Безлимитный трафик</span>
                            </div>
                        </div>
                        <button class="simple-btn btn-primary buy-btn" data-plan="pro" data-price="599" data-name="Про VPN">
                            <i class="fas fa-shopping-cart"></i>
                            <span>Выбрать тариф</span>
                        </button>
                    </div>

                    <!-- Флоуи VPN -->
                    <div class="tariff-card">
                        <div class="tariff-header">
                            <div class="tariff-icon">
                                <i class="fas fa-gem"></i>
                            </div>
                            <div class="tariff-info">
                                <h3 class="tariff-title">Флоуи VPN</h3>
                                <div class="tariff-price">
                                    <span class="price">999</span>
                                    <span class="currency">₽/мес</span>
                                </div>
                            </div>
                        </div>
                        <div class="tariff-features">
                            <div class="feature">
                                <i class="fas fa-check"></i>
                                <span>Максимальный пинг</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-check"></i>
                                <span>Эксклюзивные серверы</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-check"></i>
                                <span>Приоритетная поддержка</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-check"></i>
                                <span>Персональный менеджер</span>
                            </div>
                        </div>
                        <button class="simple-btn btn-primary buy-btn" data-plan="flowi" data-price="999" data-name="Флоуи VPN">
                            <i class="fas fa-shopping-cart"></i>
                            <span>Выбрать тариф</span>
                        </button>
                    </div>
                </div>
                
                <!-- Кнопка для тестирования оплаты -->
                <div style="margin-top: 30px; text-align: center;">
                    <button class="simple-btn btn-secondary" id="testPaymentBtn">
                        <i class="fas fa-credit-card"></i> Протестировать оплату
                    </button>
                </div>
            </section>

            <!-- Преимущества -->
            <section class="benefits-section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-star"></i> Преимущества</h2>
                    <p class="section-subtitle">Почему выбирают нас</p>
                </div>

                <div class="benefits-grid">
                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h4>Защита от DDoS</h4>
                        <p>Полная защита от атак</p>
                    </div>

                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <h4>Стабильность 99.9%</h4>
                        <p>Минимальные потери пакетов</p>
                    </div>

                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <h4>Поддержка 24/7</h4>
                        <p>Круглосуточная помощь</p>
                    </div>

                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <h4>Оптимизация</h4>
                        <p>Настроено для PUBG Mobile</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Навигация -->
        <nav class="glass-nav">
            <a href="index.html" class="nav-item active">
                <div class="nav-icon">
                    <i class="fas fa-server"></i>
                </div>
                <div class="nav-label">VPN</div>
            </a>
            <a href="profile.html" class="nav-item">
                <div class="nav-icon">
                    <i class="fas fa-user"></i>
                </div>
                <div class="nav-label">Профиль</div>
            </a>
            <a href="settings.html" class="nav-item">
                <div class="nav-icon">
                    <i class="fas fa-cog"></i>
                </div>
                <div class="nav-label">Настройки</div>
            </a>
        </nav>
    </div>

    <!-- Модальное окно покупки -->
    <div id="buyModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3 id="modalTitle">Оформление заказа</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="selected-plan" id="selectedPlanInfo"></div>

                <div class="payment-section">
                    <h4><i class="fas fa-credit-card"></i> Способ оплаты</h4>
                    <div class="payment-methods">
                        <label class="payment-method active">
                            <input type="radio" name="payment" checked>
                            <div class="payment-icon">
                                <i class="fab fa-cc-visa"></i>
                            </div>
                            <span>Карта</span>
                        </label>
                    </div>
                </div>

                <button class="simple-btn btn-primary" id="confirmBuyBtn">
                    <i class="fas fa-lock"></i> Перейти к оплате
                </button>
            </div>
        </div>
    </div>

    <!-- Модальное окно оплаты (новая система) -->
    <div id="paymentModal" class="modal-overlay">
        <div class="modal-container payment-modal">
            <div class="modal-header">
                <h3><i class="fas fa-credit-card"></i> Оплата тарифа</h3>
                <button class="modal-close" onclick="closePaymentModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="paymentPlanInfo" class="payment-plan-info"></div>
                
                <div class="payment-section">
                    <h4><i class="fas fa-wallet"></i> Реквизиты для перевода</h4>
                    <div class="payment-details-card">
                        <div class="payment-detail-item">
                            <div class="payment-detail-label">Номер карты:</div>
                            <div class="payment-detail-value">2200 7013 3827 9851</div>
                            <button class="copy-btn-small" data-text="2200 7013 3827 9851">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        
                        <div class="payment-detail-item">
                            <div class="payment-detail-label">Получатель:</div>
                            <div class="payment-detail-value">Исбагиев И.</div>
                            <button class="copy-btn-small" data-text="Исбагиев Имам Ахмедович">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        
                        <div class="payment-detail-item">
                            <div class="payment-detail-label">Банк:</div>
                            <div class="payment-detail-value">Т-Банк</div>
                            <button class="copy-btn-small" data-text="Т-Банк">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="payment-instructions">
                        <h5><i class="fas fa-list-ol"></i> Инструкция:</h5>
                        <ol>
                            <li>Скопируйте реквизиты карты</li>
                            <li>Совершите перевод на указанную карту</li>
                            <li>Сохраните скриншот или фото чека</li>
                            <li>Загрузите чек в форму ниже</li>
                        </ol>
                    </div>
                </div>
                
                <div class="payment-section">
                    <h4><i class="fas fa-receipt"></i> Загрузите чек об оплате</h4>
                    
                    <form id="receiptUploadForm">
                        <div class="form-group">
                            <label for="payerName">Ваше имя (необязательно)</label>
                            <input type="text" id="payerName" placeholder="Введите ваше имя" class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label for="payerEmail">Email для связи (необязательно)</label>
                            <input type="email" id="payerEmail" placeholder="Введите ваш email" class="form-input">
                        </div>
                        
                        <div class="file-upload-area" id="fileUploadArea">
                            <input type="file" id="receiptFile" accept="image/*" class="file-input-hidden">
                            <div class="upload-placeholder">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Нажмите для загрузки чека</p>
                                <small>JPG, PNG, GIF (макс. 5MB)</small>
                            </div>
                            <div id="filePreview" class="file-preview" style="display: none;">
                                <img id="previewImage" src="" alt="Предпросмотр">
                                <button type="button" class="remove-file-btn" onclick="removeUploadedFile()">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        
                        <button type="submit" class="simple-btn btn-primary btn-block" id="submitReceiptBtn" disabled>
                            <i class="fas fa-paper-plane"></i> Отправить чек на проверку
                        </button>
                    </form>
                </div>
                
                <div id="paymentStatus" class="payment-status" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Модальное окно подтверждения после оплаты -->
    <div id="confirmationModal" class="confirmation-modal">
        <div class="modal-container">
            <div class="confirmation-header">
                <h3><i class="fas fa-shield-check"></i> Оплата успешно завершена!</h3>
            </div>
            
            <div class="confirmation-body">
                <div class="success-icon pulse-animation">
                    <i class="fas fa-check"></i>
                </div>
                
                <div class="success-message">
                    <h4>Ваш VPN активирован!</h4>
                    <p>Перед продолжением, пожалуйста, сохраните файл конфигурации и ознакомьтесь с инструкцией по установке.</p>
                </div>
                
                <!-- Секция с ссылкой для скачивания -->
                <div class="download-section">
                    <h5><i class="fas fa-download"></i> Скачайте файл конфигурации</h5>
                    
                    <a href="#" class="download-link" id="configDownloadLink" download="flowi-vpn.conf">
                        <i class="fas fa-file-code"></i>
                        <div class="download-info">
                            <h6>flowi-vpn.conf</h6>
                            <small>WireGuard конфигурационный файл (2.5 KB)</small>
                        </div>
                    </a>
                    
                    <div class="instruction-note">
                        <p style="font-size: 0.85rem; color: var(--warning-color); margin: 0;">
                            <i class="fas fa-exclamation-triangle"></i> Сохраните этот файл в безопасном месте!
                        </p>
                    </div>
                </div>
                
                <!-- Секция с инструкцией -->
                <div class="instructions-section">
                    <h5><i class="fas fa-graduation-cap"></i> Инструкция по установке в WireGuard</h5>
                    
                    <ul class="instructions-list">
                        <li class="instruction-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <strong>Установите WireGuard</strong>
                                <p>Скачайте и установите WireGuard с официального сайта или из магазина приложений вашего устройства</p>
                            </div>
                        </li>
                        
                        <li class="instruction-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <strong>Импортируйте конфигурацию</strong>
                                <p>В приложении WireGuard нажмите "Добавить туннель" → "Импорт из файла" и выберите скачанный файл flowi-vpn.conf</p>
                            </div>
                        </li>
                        
                        <li class="instruction-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <strong>Активируйте подключение</strong>
                                <p>Нажмите на переключатель рядом с вашим туннелем в списке для активации VPN подключения</p>
                            </div>
                        </li>
                        
                        <li class="instruction-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <strong>Проверьте подключение</strong>
                                <p>Убедитесь, что статус подключения изменился на "Active" и появился значок VPN в статус-баре</p>
                            </div>
                        </li>
                    </ul>
                </div>
                
                <!-- Чекбокс подтверждения -->
                <label class="confirmation-checkbox">
                    <div class="checkbox-container">
                        <input type="checkbox" id="confirmationCheckbox">
                        <span class="checkbox-custom">
                            <i class="fas fa-check"></i>
                        </span>
                    </div>
                    <div class="checkbox-label">
                        <h6>Я сохранил файл конфигурации и прочитал инструкцию</h6>
                        <p>Я понимаю, что без файла конфигурации я не смогу подключиться к VPN</p>
                    </div>
                </label>
                
                <!-- Кнопка подтверждения -->
                <button class="simple-btn confirm-button" id="finalConfirmBtn" disabled>
                    <i class="fas fa-unlock"></i> Продолжить
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="payment-system.js"></script>
</body>

</html>